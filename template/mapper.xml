<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.palm.persistence.mapper.{{data.className}}Mapper" >
    <resultMap id="{{data.variableName}}Map" type="com.{{data.companyName}}.persistence.bean.{{data.className}}" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        {% for column in data.columns %}{% if column.isPri %}<id column="{{column.field}}" property="{{column.name}}"/>{% endif %}{% endfor %}
        {% for column in data.columns %}{% if column.isPri %}{% else %}<result column="{{column.field}}" property="{{column.name}}"/>
        {% endif %}{% endfor %}
    </resultMap>
    <sql id="commonSelect" >
       SELECT {% for column in data.columns %}V.{{column.field}} AS {{column.field}} {% if loop.last %}{% else %},{% endif %}{% endfor %}
        FROM {{data.tableName}} V
    </sql>
    <insert id="insertSelective" parameterType="com.palm.persistence.bean.{{data.className}}" useGeneratedKeys="true" keyProperty="intId" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into {{data.tableName}}
        <trim prefix="(" suffix=")" suffixOverrides="," >{% for column in data.columns %}
            <if test="{{column.name}} != null" >
                {{column.field}}{% if loop.last %}{% else %},{% endif %}
            </if>{% endfor%}
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," >{% for column in data.columns %}
            <if test="{{column.name}} != null" >
                #{{'{'+column.name+'}'}}{% if loop.last %}{% else %},{% endif %}
            </if>{% endfor%}
        </trim>{% for column in data.columns %}{% if column.isPri %}
        <selectKey keyProperty="{{column.name}}" resultType="{{column.type}}" statementType="PREPARED">
            select LAST_INSERT_ID() as value
        </selectKey>{% endif%}{% endfor %}
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.palm.persistence.bean.{{data.className}}" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update {{data.tableName}}
        <set >{% for column in data.columns %}
            <if test="{{column.name}} != null" >
                {{column.field}} = #{{'{'+column.name+'}'}}{% if loop.last %}{% else %},{% endif %}
            </if>{% endfor%}
        </set>{% for column in data.columns %}{% if column.isPri %}
        where {{column.field}}=#{{'{'+column.name+'}'}}{% endif%}{% endfor %}
    </update>
    <select id="selectByPrimaryKey" resultMap="{{data.variableName}}Map" parameterType="java.lang.Long" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <include refid="commonSelect" />
        {% for column in data.columns %}{% if column.isPri %}where V.{{column.field}}=#{{'{'+column.name+'}'}}{% endif%} {% endfor %}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from {{data.tableName}}
        {% for column in data.columns %}{% if column.isPri %}where {{column.field}}=#{{'{'+column.name+'}'}}{% endif%}{% endfor %}
    </delete>
    <select id="queryByCondition" resultType="java.util.Map" >
        <!--
          This element is automatically generated by MyBatis Generator.
          You can modify this sql as needed.
        -->
        <include refid="commonSelect" />
        <include refid="queryCondition"/>
        <include refid="queryLimit"/>
    </select>
    <sql id="queryCondition" >
        <where>
            <!--
              This element is automatically generated by MyBatis Generator.
              You can modify this sql as needed.
              Example:
                    <if test="condition.mobile != null and condition.mobile != ''">
                            and u.mobile = #{condition.mobile}
                    </if>
            -->
        </where>
    </sql>
    <sql id="queryLimit" >
        <if test="pagination != null">
            limit #{pagination.start},#{pagination.pageSize}
        </if>
    </sql>
    <select id="countByCondition" resultType="java.lang.Integer" >
        <!--
          This element is automatically generated by MyBatis Generator.
          You can modify this sql as needed.
        -->
        select count(*) from {{data.tableName}}
        <include refid="queryCondition"/>
    </select>
</mapper>